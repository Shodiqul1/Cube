<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>Rubik Cube Timer</title>

<link rel="icon" type="image/png" href="logo-rubik.png">
<link rel="apple-touch-icon" href="logo-rubik.png">
<link rel="manifest" href="manifest.json">

<style>
:root {
    --bg:#0c1a2e;
    --panel:rgba(15,40,70,.9);
    --card:rgba(20,50,90,.9);
    --border:#1a2e4c;
    --skyblue:#4db8ff;
    --silver:#c0c0c0;
    --text:#f0f0f0;
    --muted:#a0a3b0;
    --danger:#ef4444;
}
*{margin:0;padding:0;box-sizing:border-box;font-family:Segoe UI,Tahoma}
html,body{width:100%;height:100%;overflow:hidden;position:fixed;background:var(--bg);color:var(--text)}

.app{
    position:fixed;inset:0;
    display:flex;flex-direction:column;
    align-items:center;justify-content:space-between;
    padding:16px;text-align:center;
}

/* HEADER */
.header{display:flex;align-items:center;gap:12px}
.header h2{font-size:1.6em;color:var(--skyblue)}
.header svg{width:42px;height:42px}

/* SCRAMBLE */
.scramble-box{
    background:var(--panel);border:1px solid var(--border);
    border-radius:16px;padding:12px 16px;
    max-width:420px;width:100%;
}
.scramble-text{font-size:15px;color:var(--silver)}
.scramble-btn{
    margin-top:8px;padding:6px 16px;
    border:2px solid var(--skyblue);
    border-radius:999px;
    background:none;color:var(--skyblue);
}

/* TIMER */
.timer{
    font-size:64px;font-weight:700;
    background:var(--panel);
    border-radius:20px;
    padding:20px 36px;
    color:var(--skyblue);
}
.status{font-size:13px;color:var(--muted);margin:10px 0}

/* LIST */
.best{
    width:100%;max-width:420px;
    background:var(--panel);
    border-radius:20px;padding:14px;
}
.list{max-height:240px;overflow-y:auto}
.time-item{
    display:flex;justify-content:space-between;
    background:var(--card);
    border-radius:14px;
    padding:10px 16px;
    margin-bottom:8px;
}
.delete{background:none;border:none;color:var(--danger);font-size:18px}
</style>
</head>

<body>
<div class="app" id="screen">

<div class="header">
<svg viewBox="0 0 100 100">
<rect x="5" y="5" width="28" height="28" fill="#ef4444"/>
<rect x="36" y="5" width="28" height="28" fill="#22c55e"/>
<rect x="67" y="5" width="28" height="28" fill="#3b82f6"/>
<rect x="5" y="36" width="28" height="28" fill="#facc15"/>
<rect x="36" y="36" width="28" height="28" fill="#fff"/>
<rect x="67" y="36" width="28" height="28" fill="#fb923c"/>
<rect x="5" y="67" width="28" height="28" fill="#a855f7"/>
<rect x="36" y="67" width="28" height="28" fill="#14b8a6"/>
<rect x="67" y="67" width="28" height="28" fill="#84cc16"/>
</svg>
<h2>Rubik Cube Timer</h2>
</div>

<div class="scramble-box">
<div class="scramble-text" id="scramble"></div>
<button class="scramble-btn" id="scrambleBtn">New Scramble</button>
</div>

<div class="timer" id="timer">00:00.000</div>
<div class="status" id="status">Tap layar untuk mulai</div>

<div class="best">
<h3>Best Times</h3>
<div class="list" id="list"></div>
</div>

</div>

<script>
let running=false,startTime=0,elapsed=0,interval=null;
let times=JSON.parse(localStorage.getItem("times")||"[]");

const timerEl=document.getElementById("timer");
const statusEl=document.getElementById("status");
const screen=document.getElementById("screen");
const list=document.getElementById("list");
const scrambleEl=document.getElementById("scramble");
const scrambleBtn=document.getElementById("scrambleBtn");

/* FORMAT MM:SS.mmm */
function format(ms){
    let m=Math.floor(ms/60000);
    let s=Math.floor((ms%60000)/1000);
    let x=ms%1000;
    return `${String(m).padStart(2,'0')}:${String(s).padStart(2,'0')}.${String(x).padStart(3,'0')}`;
}

/* SCRAMBLE */
function generateScramble(l=20){
    const m=["U","D","L","R","F","B"],s=["","'","2"];
    let r=[],last="";
    while(r.length<l){
        let x=m[Math.floor(Math.random()*6)];
        if(x===last)continue;
        last=x;r.push(x+s[Math.floor(Math.random()*3)]);
    }
    return r.join(" ");
}
function newScramble(){scrambleEl.innerText=generateScramble();}

/* TIMER */
function start(){
    elapsed=0;startTime=Date.now();running=true;
    statusEl.innerText="Running...";
    interval=setInterval(()=>{
        elapsed=Date.now()-startTime;
        timerEl.innerText=format(elapsed);
    },10);
}
function stop(){
    running=false;clearInterval(interval);
    saveTime(elapsed);
}

/* SAVE */
function saveTime(ms){
    times.push(ms);
    times.sort((a,b)=>a-b);
    times=times.slice(0,10);
    localStorage.setItem("times",JSON.stringify(times));
    render();
}

/* RENDER */
function render(){
    list.innerHTML="";
    times.forEach((t,i)=>{
        const d=document.createElement("div");
        d.className="time-item";
        d.innerHTML=`<span>#${i+1} ${format(t)}</span><button class="delete">âœ–</button>`;
        d.querySelector("button").onclick=e=>{
            e.stopPropagation();
            times.splice(i,1);
            localStorage.setItem("times",JSON.stringify(times));
            render();
        };
        list.appendChild(d);
    });

    if(times.length>=5){
        let avg=Math.floor(times.slice(0,5).reduce((a,b)=>a+b)/5);
        statusEl.innerText=`Best: ${format(times[0])} | Ao5: ${format(avg)}`;
    }else if(times.length){
        statusEl.innerText=`Best: ${format(times[0])}`;
    }else{
        statusEl.innerText="Tap layar untuk mulai";
    }
}

/* EVENTS */
screen.onclick=()=>!running?start():stop();
scrambleBtn.onclick=e=>{e.stopPropagation();newScramble();};

/* INIT */
newScramble();
render();
</script>
</body>
</html>
